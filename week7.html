<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><title>PS70 Portfolio: Week 7</title><meta name="next-head-count" content="7"/><link rel="preload" href="/PS70/_next/static/css/3c78ce5e89065624.css" as="style"/><link rel="stylesheet" href="/PS70/_next/static/css/3c78ce5e89065624.css" data-n-g=""/><link rel="preload" href="/PS70/_next/static/css/dc5f60ce80c8a045.css" as="style"/><link rel="stylesheet" href="/PS70/_next/static/css/dc5f60ce80c8a045.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/PS70/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/PS70/_next/static/chunks/webpack-f180c5c698ed47c5.js" defer=""></script><script src="/PS70/_next/static/chunks/framework-3671d8951bf44e4e.js" defer=""></script><script src="/PS70/_next/static/chunks/main-a5da62eb29698393.js" defer=""></script><script src="/PS70/_next/static/chunks/pages/_app-f4a5458e432fb156.js" defer=""></script><script src="/PS70/_next/static/chunks/1664-c7720be4a11717d6.js" defer=""></script><script src="/PS70/_next/static/chunks/7406-7a20c54e32fa9a09.js" defer=""></script><script src="/PS70/_next/static/chunks/9927-b8ecc6eee13e613e.js" defer=""></script><script src="/PS70/_next/static/chunks/pages/week7-8f6e322c6c9f0512.js" defer=""></script><script src="/PS70/_next/static/uD3elbUyU2JWf1XVeNjnS/_buildManifest.js" defer=""></script><script src="/PS70/_next/static/uD3elbUyU2JWf1XVeNjnS/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><div class="Header_header__l1qoc"><img alt="Week 7" src="https://i.imgur.com/SmP7OtJ.jpg" decoding="async" data-nimg="fill" loading="lazy" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;object-fit:cover;color:transparent"/><div class="Header_title__MaSJ1"><h1>Week 7</h1></div></div><div class="Content_content__pTaRN"><style data-emotion="css mr7rk8">.css-mr7rk8{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:calc(100% + 80px);margin-left:-80px;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;margin-top:40px;}.css-mr7rk8>.MuiGrid-item{padding-left:80px;}</style><div class="MuiGrid-root MuiGrid-container css-mr7rk8"><style data-emotion="css 7tvfjx">.css-7tvfjx{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}@media (min-width:600px){.css-7tvfjx{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:900px){.css-7tvfjx{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:1200px){.css-7tvfjx{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:1536px){.css-7tvfjx{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:0px){.css-7tvfjx{-webkit-order:1;-ms-flex-order:1;order:1;}}@media (min-width:600px){.css-7tvfjx{-webkit-order:1;-ms-flex-order:1;order:1;}}</style><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 css-7tvfjx"><div class="Content_section__fSmTW">Electronic Output Devices</div><video width="80%" height="auto" controls=""><source src="clock_demo.mp4" type="video/mp4"/></video></div><style data-emotion="css 1p743kk">.css-1p743kk{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;margin-top:80px;}@media (min-width:600px){.css-1p743kk{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:900px){.css-1p743kk{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:1200px){.css-1p743kk{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:1536px){.css-1p743kk{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:0px){.css-1p743kk{-webkit-order:1;-ms-flex-order:1;order:1;}}@media (min-width:600px){.css-1p743kk{-webkit-order:1;-ms-flex-order:1;order:1;}}</style><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 css-1p743kk"><div class="Content_section__fSmTW">Creating a Timer</div><div class="Content_text__dw89L"><p>Now that I have pretty much decided on creating an alarm clock-esque device for my final project, I wanted to start incorporating components of my final project into my weekly assignments. With this week having an open-ended assignment where we explore various output devices, it seemed like the perfect assignment to start with.</p><p>In particular, I decided to use an LCD Display and Piezo Buzzer as my output devices and a button and ESP32 as the devices providing input. Ultimately, I was able to use these devices to create a simple 30 second timer that can be reset using a button.</p></div><div class="Content_rectangle__enz6o"><img alt="Wiring Diagram" src="/PS70/_next/static/media/clock_diagram.2a109938.jpg" decoding="async" data-nimg="fill" loading="lazy" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;object-fit:cover;color:transparent"/></div><div class="Content_text__dw89L"><a href="https://www.circuitschools.com/interfacing-16x2-lcd-module-with-esp32-with-and-without-i2c/"><p><em>Image Credit: Circuit Schools</em></p></a><p>However, as the circuit above demonstrates, wiring the LCD component in particular proved to be unexpectedly challenging. To save time and to allow me to correct if I made any mistakes, I decided to use clips as opposed to soldering the wires. However, this made the circuit quite unstable, and I will certainly be soldering the wires for my final project.</p><p>Luckily, once the LCD was wired, integrating the button and Piezo buzzer proved to be relatively straightforward. While I did have some slight difficulties integrating the ESP32 into my project for the first time, I think that having such a capable and small microprocessor will ultimately be quite beneficial!</p></div></div></div><style data-emotion="css 17kqfdz">.css-17kqfdz{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}@media (min-width:0px){.css-17kqfdz{-webkit-order:2;-ms-flex-order:2;order:2;}}@media (min-width:600px){.css-17kqfdz{-webkit-order:2;-ms-flex-order:2;order:2;}}</style><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 css-17kqfdz"><div class="Content_text__dw89L"><h1>Programming</h1><p>Seeing as this project had various different components, I decided to encapsulate the code for the LCD, buzzer, and button into respective classes. This allowed me to abstract away any unnecessary details about the devices themselves and to allow for simultaneous input/output.</p><p>Given the complexity of the components I was using, I also chose to make use of pre-built functions and libraries. In particular, for the LCD, I used the LiquidCrystal library which allowed me to easily print text to the screen. For the buzzer, I used the tone<span>(</span><span>)</span> and noTone<span>(</span><span>)</span> functions, which allowed me to play a simple tune when the timer was done. Finally, for the button, I used the digitalRead<span>(</span><span>)</span> function, which allowed me to read the state of the button in the pullup resistor circuit.</p><p>Lastly, I imported standard notes from a &quot;pitches.h&quot; file and started a timer using the millis<span>(</span><span>)</span> function. With some more troubleshooting, the project was soon ready to go! For reference, the full code for this timer is provided below:</p></div><div class="Content_code__iv5f1"><div class="sc-gswNZR inUGyR"><span style="font-size:inherit;font-family:inherit;background:white;color:black;border-radius:3px;display:inline;line-height:1.4285714285714286;overflow-x:auto;white-space:pre-wrap;padding:2px 4px"><code>
    #include &quot;pitches.h&quot;
    #include &lt;LiquidCrystal.h&gt;
    
    const int melody[] = { NOTE_C4, NOTE_G3, NOTE_G3, NOTE_A3, NOTE_G3, 0, NOTE_B3, NOTE_C4 };
    const int times[] = { 4, 8, 8, 4, 4, 4, 4, 4 };
    const int alarmTime = 30000;
    int previousMillis = 0;
    
    class Button {
      int pin;
      int buttonState;
    
    public:
      Button(int inputPin) {
        pin = inputPin;
        buttonState = 0;
      }
    
      int getReading() {
        buttonState = digitalRead(pin);
        return buttonState;
      }
    };
    
    class Buzzer {
      int pin;
    
    public:
      Buzzer(int inputPin) {
        pin = inputPin;
        pinMode(pin, INPUT);
      }
    
      void playTune() {
        for (int thisNote = 0; thisNote &lt; 8; thisNote++) {
          int noteDuration = 1000 / times[thisNote];
          tone(pin, melody[thisNote], noteDuration);
    
          int pauseBetweenNotes = noteDuration * 1.30;
          delay(pauseBetweenNotes);
          noTone(pin);
        }
      }
    };
    
    Button button(41);
    Buzzer buzzer(40);
    LiquidCrystal lcd(14, 13, 12, 20, 19, 21);
    
    void setup() {
      lcd.begin(16, 2);
      lcd.print(&quot;Time Remaining:&quot;);
    }
    
    void loop() {
      int status = button.getReading();
      if (status == 1) {
        previousMillis = millis();
        lcd.clear();
        lcd.setCursor(1, 0);
        lcd.print(&quot;Time Remaining:&quot;);
      }
      if (millis() - previousMillis &gt;= alarmTime) {
        lcd.setCursor(0, 0);
        lcd.clear();
        lcd.print(&quot;Time&#x27;s Up!&quot;);
        buzzer.playTune();
        delay(1000);
      } else {
        lcd.setCursor(0, 1);
        int time = (alarmTime - (millis() - previousMillis)) / 1000;
        lcd.print(String(time) + &quot; seconds &quot;);
      }
    }</code></span><button type="button" class="sc-bcXHqe WtpSJ"><svg class="icon" viewBox="0 0 384 512" width="16pt" height="16pt" fill="black"><path d="M280 240H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0 96H168c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM112 232c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24 24-10.7 24-24-10.7-24-24-24zM336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 48c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm144 408c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V120c0-4.4 3.6-8 8-8h40v32c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16v-32h40c4.4 0 8 3.6 8 8v336z"></path></svg></button></div></div><a href="/PS70/files/Clock.zip"><button class="Content_button__ikLVm">Download Code</button></a><a href="/PS70"><button class="Content_button__ikLVm">Return Home</button></a></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/week7","query":{},"buildId":"uD3elbUyU2JWf1XVeNjnS","assetPrefix":"/PS70","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>